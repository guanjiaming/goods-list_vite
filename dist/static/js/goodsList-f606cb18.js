var ie=Object.defineProperty;var Y=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var R=(s,e,o)=>e in s?ie(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o,Q=(s,e)=>{for(var o in e||(e={}))ae.call(e,o)&&R(s,o,e[o]);if(Y)for(var o of Y(e))ne.call(e,o)&&R(s,o,e[o]);return s};var O=(s,e,o)=>(R(s,typeof e!="symbol"?e+"":e,o),o);import{_ as H}from"./plugin-vue_export-helper-fa90f7e4.js";import{c as p,o as u,d as E,r as J,b as t,n as M,w as y,v as k,e as W,F as b,f as A,t as _,g as L,h as C,P as le,S as ce,i as X,j as ue,k as F,l as de,m as he,p as G,q as pe,s as _e,u as fe,x as me,T as w,y as ee,z as ge,A as ve,a as ye}from"./vendor-c879c4ed.js";const we={};function Se(s,e){return u(),p("h1",null,"search")}var Pe=H(we,[["render",Se]]),$;(function(s){s.List="list",s.Grid="grid"})($||($={}));const ke=E({props:{sortType:{type:Number,required:!0},layoutMode:{type:String,required:!0}},setup(s,e){let{sortChange:o,priceSortClass:r}=be(s,e),{layoutChange:i}=Le(s,e);return{sortChange:o,priceSortClass:r,layoutChange:i}}});function be(s,e){const o=J("");let r=s.sortType;function i(n){n===3?r===3?r=4:r=3:r=n,o.value="",r===3&&(o.value="price-asc"),r===4&&(o.value="price-desc"),e.emit("onchangeSortType",r)}return{sortChange:i,priceSortClass:o}}function Le(s,e){function o(){let r=$.List;s.layoutMode===$.List&&(r=$.Grid),e.emit("onchangeLayoutMode",r)}return{layoutChange:o}}const Ce={class:"filter-bar"},$e={class:"sort-list"},Ie=t("span",{class:"text"},"\u7EFC\u5408",-1),Te=[Ie],He=t("span",{class:"text"},"\u9500\u91CF",-1),Me=[He],Fe=t("span",{class:"text"},"\u4EF7\u683C",-1),Be=W('<i class="icon icon-asc"><svg class="icon" style="width:1em;height:1em;vertical-align:middle;fill:currentColor;overflow:hidden;" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M541.866667 285.866667l345.6 345.6c17.066667 17.066667 17.066667 42.666667 0 59.733333-8.533333 8.533333-19.2 12.8-29.866667 12.8H168.533333c-23.466667 0-42.666667-19.2-42.666666-42.666667 0-10.666667 4.266667-21.333333 12.8-29.866666l343.466666-345.6c17.066667-17.066667 42.666667-17.066667 59.733334 0z"></path></svg></i><i class="icon icon-desc"><svg class="icon" style="width:1em;height:1em;vertical-align:middle;fill:currentColor;overflow:hidden;" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M482.133333 738.133333L136.533333 392.533333c-17.066667-17.066667-17.066667-42.666667 0-59.733333 8.533333-8.533333 19.2-12.8 29.866667-12.8h689.066667c23.466667 0 42.666667 19.2 42.666666 42.666667 0 10.666667-4.266667 21.333333-12.8 29.866666L541.866667 738.133333c-17.066667 17.066667-42.666667 17.066667-59.733334 0z"></path></svg></i>',2),De=[Be],xe={class:"icon-grid"},ze=t("svg",{class:"icon",style:{width:"1em",height:"1em","vertical-align":"middle",fill:"currentColor",overflow:"hidden"},viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M179.712 501.28896h264.47872a20.48 20.48 0 0 0 20.48-20.48V216.33024a20.48 20.48 0 0 0-20.48-20.48H179.712a20.48 20.48 0 0 0-20.48 20.48v264.47872a20.48 20.48 0 0 0 20.48 20.48z m20.48-264.47872h223.51872v223.51872H200.192V236.81024zM529.63328 501.28896h264.47872a20.48 20.48 0 0 0 20.48-20.48V216.33024a20.48 20.48 0 0 0-20.48-20.48H529.63328a20.48 20.48 0 0 0-20.48 20.48v264.47872a20.48 20.48 0 0 0 20.48 20.48z m20.48-264.47872h223.51872v223.51872H550.11328V236.81024zM179.712 851.21024h264.47872a20.48 20.48 0 0 0 20.48-20.48V566.23104a20.48 20.48 0 0 0-20.48-20.48H179.712a20.48 20.48 0 0 0-20.48 20.48v264.47872a20.48 20.48 0 0 0 20.48 20.50048z m20.48-264.4992h223.51872v223.51872H200.192V586.71104zM509.15328 830.73024a20.48 20.48 0 0 0 20.48 20.48h264.47872a20.48 20.48 0 0 0 20.48-20.48V566.23104a20.48 20.48 0 0 0-20.48-20.48H529.63328a20.48 20.48 0 0 0-20.48 20.48v264.4992z m40.96-244.0192h223.51872v223.51872H550.11328V586.71104z"})],-1),Ee=[ze],Ae={class:"icon-list"},Ge=t("svg",{class:"icon",style:{width:"1em",height:"1em","vertical-align":"middle",fill:"currentColor",overflow:"hidden"},viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M64 480h352V128H64v352z m64-288h224v224H128V192zM64 928h352V576H64v352z m64-288h224v224H128v-224zM526.848 224H928a32 32 0 1 0 0-64H526.848a32 32 0 0 0 0 64zM928 608H526.848a32 32 0 1 0 0 64H928a32 32 0 1 0 0-64zM928 384H526.848a32 32 0 0 0 0 64H928a32 32 0 1 0 0-64zM928 832H526.848a32 32 0 1 0 0 64H928a32 32 0 1 0 0-64z"})],-1),je=[Ge];function Ve(s,e,o,r,i,n){return u(),p("section",Ce,[t("ul",$e,[t("li",{class:M(["sort-item",{cur:s.sortType===9}])},[t("a",{class:"sort-item-a",href:"javascript:",onClick:e[0]||(e[0]=a=>s.sortChange(9))},Te)],2),t("li",{class:M(["sort-item",{cur:s.sortType===2}])},[t("a",{class:"sort-item-a",href:"javascript:",onClick:e[1]||(e[1]=a=>s.sortChange(2))},Me)],2),t("li",{class:M(["sort-item",{cur:s.sortType===3||s.sortType===4}])},[t("a",{class:"sort-item-a",href:"javascript:",onClick:e[2]||(e[2]=a=>s.sortChange(3))},[Fe,t("span",{class:M(["sort-icons",[s.priceSortClass]])},De,2)])],2)]),t("a",{href:"javascript:",class:"icon-layout",onClick:e[3]||(e[3]=(...a)=>s.layoutChange&&s.layoutChange(...a))},[y(t("i",xe,Ee,512),[[k,s.layoutMode==="grid"]]),y(t("i",Ae,je,512),[[k,s.layoutMode==="list"]])])])}var Ue=H(ke,[["render",Ve]]);const Re=E({name:"GoodsList",props:{goodsData:{type:Array,required:!0},layoutMode:{type:String,required:!0}},emits:["showSkuPopup","toGoodsDetail"],setup(s,e){function o(i,n){i.stopPropagation(),e.emit("showSkuPopup",n)}function r(i){e.emit("toGoodsDetail",i)}return{emitShowSkuPopup:o,emitToGoodsDetail:r}}}),Oe={class:"goods-item__cover"},Ne=["src"],qe={class:"goods-item__info"},Ke={class:"goods__info__above"},Ze={class:"goods-item__title"},Ye={class:"goods-item__description"},Qe={class:"activities"},Je={class:"goods__info__below"},We={class:"goods-item__price-info"},Xe={class:"price"},es={class:"sale-price"},ss=L("\xA5 "),ts={class:"int"},os={key:0,class:"reference-price"},rs=t("br",null,null,-1),is=t("img",{class:"vip-icon",src:"https://omo.aiyouyi.cn/web-file/wx/app/images/vip9.png",alt:""},null,-1),as={key:0,class:"vip-price"},ns={class:"sale-price"},ls=L("\xA5 "),cs={class:"int"},us=t("img",{class:"vip-icon",src:"https://omo.aiyouyi.cn/web-file/wx/app/images/vip9.png",alt:""},null,-1),ds=["onClick"],hs=W('<i class="icon icon-cart"><svg class="icon" style="width:1em;height:1em;vertical-align:middle;fill:currentColor;overflow:hidden;" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M363.7248 853.310464m-56.9344 0a56.9344 56.9344 0 1 0 113.8688 0 56.9344 56.9344 0 1 0-113.8688 0Z"></path><path d="M761.9584 853.310464m-56.9344 0a56.9344 56.9344 0 1 0 113.8688 0 56.9344 56.9344 0 1 0-113.8688 0Z"></path><path d="M254.7712 284.785664l42.8032 372.9408c1.6384 14.336 13.824 25.1904 28.2624 25.1904H826.368c13.7216 0 25.6-9.8304 27.9552-23.4496l61.44-341.2992c2.7648-15.4624-7.4752-30.208-22.9376-33.0752-1.6384-0.3072-3.3792-0.4096-5.0176-0.4096l-633.0368 0.1024z m-6.5536-56.9344H887.808c5.12 0 10.1376 0.4096 15.1552 1.3312 46.3872 8.3968 77.2096 52.736 68.8128 99.1232l-61.44 341.2992c-7.2704 40.6528-42.7008 70.2464-83.968 70.2464H325.7344c-43.4176 0-79.872-32.5632-84.7872-75.5712L187.2896 195.902464c-1.6384-14.336-13.824-25.1904-28.2624-25.1904H79.2576c-15.6672 0-28.4672-12.6976-28.4672-28.4672S63.488 113.777664 79.2576 113.777664h79.7696c43.4176 0 79.872 32.5632 84.7872 75.5712 0 0.1024 4.4032 38.5024 4.4032 38.5024z"></path></svg></i>',1),ps=[hs];function _s(s,e,o,r,i,n){return u(),p("ul",{class:M(["goods-list",[s.layoutMode]])},[(u(!0),p(b,null,A(s.goodsData,(a,d)=>(u(),p("li",{class:"goods-item",key:d},[t("div",{class:"goods-item__inner",onClick:e[0]||(e[0]=(...c)=>s.emitToGoodsDetail&&s.emitToGoodsDetail(...c))},[t("div",Oe,[t("img",{src:a.mainImage,alt:""},null,8,Ne)]),t("div",qe,[t("div",Ke,[t("p",Ze,_(a.name),1),t("p",Ye,_(a.description),1),t("div",Qe,[(u(!0),p(b,null,A(a==null?void 0:a.promotionLabels,(c,l)=>(u(),p("span",{class:"word",key:l},_(c.labelAbbName),1))),128))])]),t("div",Je,[t("div",We,[t("div",Xe,[t("strong",es,[t("em",null,[ss,t("span",ts,_(a.__salePriceInt),1),L(_(a.__salePriceFloat),1)])]),a.__referencePrice?(u(),p("strong",os,[t("em",null,"\xA5"+_(a.__referencePrice),1)])):C("",!0),a.__isShowVIPICon?(u(),p(b,{key:1},[rs,is],64)):C("",!0)]),a.__vipPriceInt?(u(),p("div",as,[t("strong",ns,[t("em",null,[ls,t("span",cs,_(a.__vipPriceInt),1),L(_(a.__vipPriceFloat),1)])]),us])):C("",!0)])])]),a.stock>0?(u(),p("div",{key:0,class:"btn-cart",onClick:c=>s.emitShowSkuPopup(c,d)},ps,8,ds)):C("",!0)])]))),128))],2)}var fs=H(Re,[["render",_s]]);const ms=E({components:{Popup:le,Stepper:ce},props:{isShow:{type:Boolean,required:!0},goodsData:{}},setup(s){let e=J(!1);X({}),console.log("popup"),ue(()=>s.isShow,i=>{e.value=!!i});function o(){}function r(){}return{isShowPopup:e,emitBuyNow:r,emitAddToCart:o}}}),se=s=>(pe("data-v-d16ddf8e"),s=s(),_e(),s),gs={class:"sku-popup-inner"},vs=se(()=>t("section",{class:"sku-popup_header"},[t("div",{class:"sku-popup_header_img"},[t("img",{class:"picture",src:"https://pre-omo.aiyouyi.cn/thumbnail/270x270/999/image/33911/f3dcf67eccaa4d6fa12c68910bf88e29.jpg",alt:""})]),t("div",{class:"sku-popup_header_info"},[t("div",{class:"price"},[t("div",{class:"red-price"},[t("strong",null,[t("em",null,[t("small",null,"\xA5 "),t("span",{class:"int"},"999"),L(".99")])])]),t("div",{class:"black-price"},[t("strong",null,[t("em",null,[t("small",null,"\xA5 "),t("span",{class:"int"},"999"),L(".99")])])])]),t("div",{class:"info__below"},[t("div",{class:"stock"}," \u5269\u4F599993\u7C73 "),t("div",{class:"selected-sku-attr"}," \u5DF2\u9009:\u9ED8\u8BA4\u89C4\u683C ")])])],-1)),ys=se(()=>t("section",{class:"sku-popup_body"},[t("ul",{class:"sku-attr-group_list"},[t("li",{class:"sku-attr-group_item"},[t("h4",{class:"sku-attr-group-heading"},"\u989C\u8272"),t("ul",{class:"sku-attr_list"},[t("li",{class:"sku-attr_item cur"},[t("a",{href:"javascript:;",class:"sku-attr_item_a"},"\u9EC4\u8272")]),t("li",{class:"sku-attr_item"},[t("a",{href:"javascript:;",class:"sku-attr_item_a"},"\u9EC4\u8272")]),t("li",{class:"sku-attr_item"},[t("a",{href:"javascript:;",class:"sku-attr_item_a"},"\u9EC4\u8272")])])]),t("li",{class:"sku-attr-group_item"},[t("h4",{class:"sku-attr-group-heading"},"\u989C\u8272"),t("ul",{class:"sku-attr_list"},[t("li",{class:"sku-attr_item"},[t("a",{href:"javascript:;",class:"sku-attr_item_a"},"\u9EC4\u8272")]),t("li",{class:"sku-attr_item"},[t("a",{href:"javascript:;",class:"sku-attr_item_a"},"\u9EC4\u8272")]),t("li",{class:"sku-attr_item"},[t("a",{href:"javascript:;",class:"sku-attr_item_a"},"\u9EC4\u8272")])])]),t("li",{class:"sku-attr-group_item"},[t("h4",{class:"sku-attr-group-heading"},"\u989C\u8272"),t("ul",{class:"sku-attr_list"},[t("li",{class:"sku-attr_item"},[t("a",{href:"javascript:;",class:"sku-attr_item_a"},"\u9EC4\u8272")]),t("li",{class:"sku-attr_item"},[t("a",{href:"javascript:;",class:"sku-attr_item_a"},"\u9EC4\u8272")]),t("li",{class:"sku-attr_item"},[t("a",{href:"javascript:;",class:"sku-attr_item_a"},"\u9EC4\u8272")])])])])],-1)),ws={class:"sku-popup_footer"};function Ss(s,e,o,r,i,n){const a=F("Stepper"),d=F("Popup");return u(),de(d,{show:s.isShowPopup,"onUpdate:show":e[2]||(e[2]=c=>s.isShowPopup=c),position:"bottom",class:"sku-popup"},{default:he(()=>[t("div",gs,[vs,ys,G(a),t("section",ws,[t("button",{class:"footer-btn btn-add-to-cart",onClick:e[0]||(e[0]=(...c)=>s.emitAddToCart&&s.emitAddToCart(...c))},"\u52A0\u5165\u8D2D\u7269\u8F66"),t("button",{class:"footer-btn btn-buy-now",onClick:e[1]||(e[1]=(...c)=>s.emitBuyNow&&s.emitBuyNow(...c))},"\u7ACB\u5373\u8D2D\u4E70")])])]),_:1},8,["show"])}var Ps=H(ms,[["render",Ss],["__scopeId","data-v-d16ddf8e"]]);class B{static getCookie(e){if(typeof document=="undefined")return;let o=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return o==null?void 0:unescape(o[2])}static setCookie(e,o,r={}){if(typeof document=="undefined")return;typeof r.expires=="number"&&(r.expires=new Date(new Date*1+r.expires*864e5)),r.path||(r.path="/"),r.expires=r.expires?r.expires.toUTCString():"";let i="";for(const n in r)!r[n]||(i+="; "+n,r[n]!==!0&&(i+="="+r[n].split(";")[0]));return console.log("setCookieValue: -- ",e+"="+o+i),document.cookie=e+"="+o+i}static removeCookie(e){this.setCookie(e,"",{expires:-1})}}function D(s){let e=new RegExp("(^|&)"+s+"=([^&]*)(&|$)"),o=window.location.search&&window.location.search.substr(1).match(e);return o&&o.length>2?decodeURIComponent(o[2]):""}function N(){return D("mid")||B.getCookie("mid")||""}function ks(){return D("cid")||B.getCookie(`cid-${N()}`)||B.getCookie("defaultCid")||""}function q(){let s="mobile-mall";D("evn")==="mini"&&(s="mina");const o=location.pathname.match(/^\/shop\/|^\/subsys\/|^\/cp\//);if(o)switch(o[0]){case"/shop/":s="H5";break;case"/subsys/":s="H5";break}return s}function te(){let s=q();return s==="mobile-mall"?B.getCookie(`token-${N()}`)||"":s==="h5"?B.getCookie("token")||"":s==="mina"?D("token"):""}const j=q(),K={category:"/shop/category.html",goodsDetail:"/shop/item.html"};function bs(s,e){return j==="h5"||j==="mina"||j==="mobile-mall"?K[s]:"undefined"}class Ls{static navigateTo(e,o={}){const r=bs(e);window.location.href=r,q()==="mina"&&fe.miniProgram.navigateTo({url:r})}static redirectTo(){}static switchTab(){}static reLaunch(){}}function Cs(s,e){function o(n){if(!n)return;const a=s.historySearchList.findIndex(d=>d===n);console.log("findIndex",a),a>-1&&s.historySearchList.splice(a,1),s.historySearchList.unshift(n),s.historySearchList.length>10&&s.historySearchList.splice(s.historySearchList.length-1,1),localStorage.setItem("searchKeyword"+e,s.historySearchList.join(","))}function r(){if(localStorage.getItem("searchKeyword"+e)){let n=window.localStorage.getItem("searchKeyword"+e);s.historySearchList=n.split(",")}}function i(){s.historySearchList=[],localStorage.removeItem("searchKeyword"+e)}return{getHistorySearchList:r,addHistorySearchListItem:o,clearHistorySearchList:i}}function $s(s){let e=!1,o=null,r=Date.now(),i=0,n=120,a=window.innerHeight,d=document.querySelector("#searchHeadFixer"),c=!1,l=30,f=0;window.addEventListener("scroll",x);function x(){let m=300,I=Date.now(),S=m-(I-r);o&&clearTimeout(o),i=document.documentElement.scrollTop||document.body.scrollTop,S<=0?z():o=window.setTimeout(z,S)}function z(){if(!e){let I=document.body.offsetHeight,S=document.documentElement.scrollTop||document.body.scrollTop;I<=a+S+n&&(console.log("\u5230\u5E95\u90E8\u4E86"),e=!0,s())}const m=document.querySelector("#mobileNav .tab-bar-wrap");i<=50&&(c=!1,d.classList.remove("fixer-transition")),i>=l&&(c=!0,d.classList.contains("fixer-transition")||setTimeout(function(){d.classList.add("fixer-transition")},100)),i>f&&c&&(console.log("\u5411\u4E0A\u6ED1\u52A8"),d.style.transform=`translate3d(0px, -${l}px, 0px)`,m&&(m.style.transition="transform 0.2s ease",m.style.transform="translate3d(0,6.5vh,0)")),i<f&&(console.log("\u5411\u4E0B"),d.style.transform="translate3d(0,0,0)",m&&(m.style.transform="translate3d(0,0,0)")),f=i,r=Date.now()}function V(){e=!1}return{pageScrollListenerFn:x,loadMoreEnd:V}}function Is(s){s.forEach(e=>{if(e.fansPrice)if(Number(e.fansPrice)<Number(e.salePrice)){let o=e.salePrice.indexOf(".");e.__salePriceInt=e.salePrice.substr(0,o),e.__salePriceFloat=e.salePrice.substr(o),o=e.fansPrice.indexOf("."),e.__vipPriceInt=e.fansPrice.substr(0,o),e.__vipPriceFloat=e.fansPrice.substr(o)}else{let o=e.fansPrice.indexOf(".");e.__salePriceInt=e.fansPrice.substr(0,o),e.__salePriceFloat=e.fansPrice.substr(o),e.__isShowVIPICon=!0}else if(e.realPrice&&e.memberPrice)if(e.participateActivity){let o=e.realPrice.indexOf(".");e.__salePriceInt=e.realPrice.substr(0,o),e.__salePriceFloat=e.realPrice.substr(o),e.__referencePrice=e.salePrice,o=e.memberPrice.indexOf("."),e.__vipPriceInt=e.memberPrice.substr(0,o),e.__vipPriceFloat=e.memberPrice.substr(o)}else if(Number(e.realPrice)<Number(e.memberPrice)){let o=e.realPrice.indexOf(".");e.__salePriceInt=e.realPrice.substr(0,o),e.__salePriceFloat=e.realPrice.substr(o),e.__referencePrice=e.salePrice}else{let o=e.salePrice.indexOf(".");e.__salePriceInt=e.salePrice.substr(0,o),e.__salePriceFloat=e.salePrice.substr(o),o=e.memberPrice.indexOf("."),e.__vipPriceInt=e.memberPrice.substr(0,o),e.__vipPriceFloat=e.memberPrice.substr(o)}else{if(e.realPrice){let o=e.realPrice.indexOf(".");e.__salePriceInt=e.realPrice.substr(0,o),e.__salePriceFloat=e.realPrice.substr(o),e.__referencePrice=e.salePrice}else{let o=e.salePrice.indexOf(".");e.__salePriceInt=e.salePrice.substr(0,o),e.__salePriceFloat=e.salePrice.substr(o)}if(e.memberPrice){let o=e.memberPrice.indexOf(".");e.__vipPriceInt=e.memberPrice.substr(0,o),e.__vipPriceFloat=e.memberPrice.substr(o)}}})}function v(s){const e=me.create();o(s),r(e);function o(i){var c,l;const n=N(),a=ks(),d=te();((c=i.method)==null?void 0:c.toUpperCase())==="GET"&&(i.params.cid=a,i.params.mid=n),((l=i.method)==null?void 0:l.toUpperCase())==="POST"&&(i.data.cid=a,i.data.mid=n),i.headers=Q({businessId:"1",merchantId:a,cid:a,mid:n,token:d,accessToken:te()},i.headers)}function r(i){i.interceptors.request.use(n=>n,n=>(w("\u8BF7\u6C42\u53C2\u6570\u9519\u8BEF"),Promise.reject(n))),i.interceptors.response.use(n=>{const{data:a}=n;return a},n=>(console.log(n),Promise.reject(n)))}return e(s)}v.get=function(e){return e.method="GET",v(e)};v.post=function(e){return e.method="POST",v(e)};class Ts{constructor(){O(this,"baseURL","//pre-item.aiyouyi.cn")}fetchProductInfo(e){return v.post({baseURL:this.baseURL,url:"/item/c/item/getProductInfo",data:e})}fetchProductList(e){return v.post({baseURL:this.baseURL,url:"/item/c/item/pageProductInfoList",data:e})}}var Hs=new Ts;class Ms{constructor(){O(this,"baseURL","//pre-yx.aiyouyi.cn")}fetchPromotionLabelsBySkuIds(e){return v.post({baseURL:this.baseURL,url:"/mkt-api/v1/c/promotion/labels",data:{skuIds:e}})}fetchSkuActivity(e){return v.get({baseURL:this.baseURL,url:`/mkt-api/v1/c/promotion/starting/${e}`})}}var Fs=new Ms;const Bs=E({components:{SearchBar:Pe,FilterBar:Ue,GoodsList:fs,skuPopup:Ps},setup(){let s="2";const e=X({placeholderText:"\u8BF7\u8F93\u5165\u8981\u641C\u7D22\u7684\u5173\u952E\u8BCD",categoryId:"",keyword:"",isShowSearchPanel:!1,historySearchList:[],hotSearchList:[],layoutMode:$.List,sortType:9,startIndex:1,total:0,pageSize:20,goodsList:[],isLoading:!1,scrollTop:0,skuPopupInfo:{isShow:!1,currentSpuData:null}});e.categoryId=D("categoryId"),e.placeholderText=e.hotSearchList[0]||"",w("111");const{getHistorySearchList:o,addHistorySearchListItem:r,clearHistorySearchList:i}=Cs(e,s);o();function n(){if(console.log("enter...on press"),e.keyword=e.keyword||e.hotSearchList[0]||"",!e.keyword){alert("\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD");return}w.loading({message:"Vant 3",forbidClick:!0,duration:0}),r(e.keyword)}function a(){e.categoryId&&Ls.navigateTo("search"),e.isShowSearchPanel=!0}function d(){}function c(){e.isShowSearchPanel=!1}function l(h){e.layoutMode=h}function f(h){e.sortType!==h&&(e.sortType=h,console.log("todo getGoodsLIst"))}const x=ee(()=>e.isShowSearchPanel&&e.historySearchList.length),z=ee(()=>e.isShowSearchPanel&&e.hotSearchList.length);function V(h){const P=e.goodsList[h];P&&P.goodsInfos&&P.goodsInfos.length===1&&P.type!==1?alert("\u76F4\u63A5\u52A0\u5165\u8D2D\u7269\u8F66"):alert("Sku Popup")}function m(){console.log("\u53BB\u5546\u54C1\u8BE6\u60C5")}function I(){console.log("\u5237\u65B0")}async function S(){try{w.loading({duration:0,message:"\u52A0\u8F7D\u4E2D..."});const{data:h,msg:P,code:oe}=await Hs.fetchProductList({keyword:e.keyword,startIndex:e.startIndex,pageSize:e.pageSize,sortType:e.sortType,status:1});if(oe!==200||!h.list){w(P);return}try{const U=h==null?void 0:h.list.map(T=>T.goodsInfos[0].id);if(U.length){const{data:T,code:re}=await Fs.fetchPromotionLabelsBySkuIds(U);if(re==="SYS0000"){const Z=new Map;for(let g=0;g<T.length;g++)Z.set(T[g].skuId,T[g].labelList);for(let g=0;g<h.list.length;g++)h.list[g].promotionLabels=Z.get(h.list[g].goodsInfos[0].id)}}}catch{console.error("\u4FC3\u9500\u63A5\u53E3\u9519\u8BEF")}e.goodsList=h.list,console.log(h.list),Is(e.goodsList),w.clear()}catch(h){w(h)}}return{state:e,isShowHistory:x,isShowHotSearch:z,hideSearchPanel:c,doSearch:n,onFocus:a,onBlur:d,changeSort:f,changeLayoutMode:l,showSkuPopup:V,toGoodsDetail:m,clearHistorySearchList:i,onRefresh:I,getGoodsListData:S}},mounted(){$s(function(){console.log("LoadMore")}),this.getGoodsListData()}}),Ds={id:"searchHeadFixer",class:"search-panel"},xs={class:"search-wrap"},zs=t("svg",{class:"icon",style:{width:"1em",height:"1em","vertical-align":"middle",fill:"currentColor",overflow:"hidden"},viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M395.21518 513.604544l323.135538-312.373427c19.052938-18.416442 19.052938-48.273447 0-66.660212-19.053961-18.416442-49.910737-18.416442-68.964698 0L291.75176 480.290811c-19.052938 18.416442-19.052938 48.273447 0 66.660212l357.633237 345.688183c9.525957 9.207709 22.01234 13.796214 34.497699 13.796214 12.485359 0 24.971741-4.588505 34.466999-13.82896 19.052938-18.416442 19.052938-48.242747 0-66.660212L395.21518 513.604544z"})],-1),Es=[zs],As={action:"javascript:",class:"search-form"},Gs=t("i",{class:"search-form__icon icon-search"},[t("svg",{class:"icon",style:{width:"1em",height:"1em","vertical-align":"middle",fill:"currentColor",overflow:"hidden"},viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M789.804097 737.772047 742.865042 784.699846 898.765741 940.600545 945.704796 893.672746ZM456.92259 82.893942c-209.311143 0-379.582131 170.282245-379.582131 379.582131s170.270988 379.570875 379.582131 379.570875c209.287607 0 379.558595-170.270988 379.558595-379.570875S666.210197 82.893942 456.92259 82.893942zM770.128989 462.477097c0 172.721807-140.508127 313.229934-313.206398 313.229934-172.720783 0-313.229934-140.508127-313.229934-313.229934s140.508127-313.229934 313.229934-313.229934C629.620861 149.247162 770.128989 289.75529 770.128989 462.477097z"})])],-1),js=["placeholder"],Vs=t("i",{class:"search-form__icon icon-clear"},[t("svg",{class:"icon",style:{width:"1em",height:"1em","vertical-align":"middle",fill:"currentColor",overflow:"hidden"},viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M512 64.5C264.85 64.5 64.5 264.85 64.5 512S264.85 959.5 512 959.5 959.5 759.15 959.5 512 759.15 64.5 512 64.5z m235.21 599.09c16.06 13.81 17.89 38.03 4.08 54.09-7.59 8.83-18.31 13.36-29.1 13.36-8.85 0-17.74-3.05-24.98-9.26L512 562.59 326.79 721.78a38.22 38.22 0 0 1-24.98 9.26c-10.79 0-21.52-4.53-29.1-13.36-13.81-16.06-11.98-40.28 4.08-54.09L453.15 512 276.79 360.42c-16.06-13.81-17.89-38.03-4.08-54.09 13.81-16.07 38.01-17.89 54.09-4.1L512 461.42l185.2-159.19c16.08-13.8 40.29-11.96 54.09 4.1 13.81 16.06 11.98 40.28-4.08 54.09L570.85 512.01l176.36 151.58z"})])],-1),Us={key:0,class:"history-search"},Rs={class:"history-search-head"},Os=t("p",null,"\u5386\u53F2\u641C\u7D22",-1),Ns=t("svg",{class:"icon",style:{width:"1em",height:"1em","vertical-align":"middle",fill:"currentColor",overflow:"hidden"},viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M607.897867 768.043004c-17.717453 0-31.994625-14.277171-31.994625-31.994625L575.903242 383.935495c0-17.717453 14.277171-31.994625 31.994625-31.994625s31.994625 14.277171 31.994625 31.994625l0 351.94087C639.892491 753.593818 625.61532 768.043004 607.897867 768.043004zM415.930119 768.043004c-17.717453 0-31.994625-14.277171-31.994625-31.994625L383.935495 383.935495c0-17.717453 14.277171-31.994625 31.994625-31.994625 17.717453 0 31.994625 14.277171 31.994625 31.994625l0 351.94087C447.924744 753.593818 433.647573 768.043004 415.930119 768.043004zM928.016126 223.962372l-159.973123 0L768.043004 159.973123c0-52.980346-42.659499-95.983874-95.295817-95.983874L351.94087 63.989249c-52.980346 0-95.983874 43.003528-95.983874 95.983874l0 63.989249-159.973123 0c-17.717453 0-31.994625 14.277171-31.994625 31.994625s14.277171 31.994625 31.994625 31.994625l832.032253 0c17.717453 0 31.994625-14.277171 31.994625-31.994625S945.73358 223.962372 928.016126 223.962372zM319.946246 159.973123c0-17.545439 14.449185-31.994625 31.994625-31.994625l320.806316 0c17.545439 0 31.306568 14.105157 31.306568 31.994625l0 63.989249L319.946246 223.962372 319.946246 159.973123 319.946246 159.973123zM736.048379 960.010751 288.123635 960.010751c-52.980346 0-95.983874-43.003528-95.983874-95.983874L192.139761 383.591466c0-17.717453 14.277171-31.994625 31.994625-31.994625s31.994625 14.277171 31.994625 31.994625l0 480.435411c0 17.717453 14.449185 31.994625 31.994625 31.994625l448.096758 0c17.717453 0 31.994625-14.277171 31.994625-31.994625L768.215018 384.795565c0-17.717453 14.277171-31.994625 31.994625-31.994625s31.994625 14.277171 31.994625 31.994625l0 479.231312C832.032253 916.835209 789.028725 960.010751 736.048379 960.010751z"})],-1),qs=[Ns],Ks={class:"tag-list"},Zs={key:1,class:"hot-search"},Ys=t("div",{class:"hot-search-head"},[t("p",null,"\u641C\u7D22\u70ED\u8BCD")],-1),Qs={class:"tag-list"},Js={class:"search-result"};function Ws(s,e,o,r,i,n){const a=F("FilterBar"),d=F("GoodsList",!0),c=F("sku-popup");return u(),p(b,null,[t("header",Ds,[t("section",xs,[y(t("i",{class:"icon-back",onClick:e[0]||(e[0]=(...l)=>s.hideSearchPanel&&s.hideSearchPanel(...l))},Es,512),[[k,s.state.isShowSearchPanel]]),t("form",As,[Gs,y(t("input",{class:"search-form__input",type:"search",onKeyup:e[1]||(e[1]=ve((...l)=>s.doSearch&&s.doSearch(...l),["enter"])),onFocus:e[2]||(e[2]=(...l)=>s.onFocus&&s.onFocus(...l)),onBlur:e[3]||(e[3]=(...l)=>s.onBlur&&s.onBlur(...l)),"onUpdate:modelValue":e[4]||(e[4]=l=>s.state.keyword=l),placeholder:s.state.placeholderText},null,40,js),[[ge,s.state.keyword]]),Vs]),y(t("button",{class:"search-btn btn-search",onClick:e[5]||(e[5]=(...l)=>s.doSearch&&s.doSearch(...l))},"\u641C\u7D22",512),[[k,s.state.isShowSearchPanel]])]),s.isShowHistory?(u(),p("div",Us,[t("div",Rs,[Os,t("i",{class:"search-head__icon icon-delete",onClick:e[6]||(e[6]=(...l)=>s.clearHistorySearchList&&s.clearHistorySearchList(...l))},qs)]),t("ul",Ks,[(u(!0),p(b,null,A(s.state.historySearchList,(l,f)=>(u(),p("li",{class:"tag-item",key:f},_(l),1))),128))])])):C("",!0),s.isShowHotSearch?(u(),p("div",Zs,[Ys,t("ul",Qs,[(u(!0),p(b,null,A(s.state.hotSearchList,(l,f)=>(u(),p("li",{class:"tag-item",key:f},_(l),1))),128))])])):C("",!0),y(G(a,{"layout-mode":s.state.layoutMode,"sort-type":s.state.sortType,onOnchangeLayoutMode:s.changeLayoutMode,onOnchangeSortType:s.changeSort},null,8,["layout-mode","sort-type","onOnchangeLayoutMode","onOnchangeSortType"]),[[k,!s.state.isShowSearchPanel]])]),y(t("div",Js,[G(d,{"goods-data":s.state.goodsList,"layout-mode":s.state.layoutMode,onShowSkuPopup:s.showSkuPopup,onToGoodsDetail:s.toGoodsDetail},null,8,["goods-data","layout-mode","onShowSkuPopup","onToGoodsDetail"])],512),[[k,!s.state.isShowSearchPanel]]),G(c,{"is-show":s.state.skuPopupInfo.isShow,"goods-data":s.state.skuPopupInfo.currentSpuData},null,8,["is-show","goods-data"])],64)}var Xs=H(Bs,[["render",Ws]]);const et=ye(Xs);et.mount("#app");
